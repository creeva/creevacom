{"id":96081,"date":"2021-03-12T14:10:56","date_gmt":"2021-03-12T19:10:56","guid":{"rendered":"http:\/\/localhost\/wordpress\/?p=96081"},"modified":"2023-02-09T22:57:07","modified_gmt":"2023-02-10T03:57:07","slug":"scripting-scripting-scripting-the-night-away","status":"publish","type":"post","link":"http:\/\/10.10.2.102\/creevacom\/index.php\/2021\/03\/12\/scripting-scripting-scripting-the-night-away\/","title":{"rendered":"Scripting&#8230;Scripting..Scripting The Night Away&#8230;"},"content":{"rendered":"\n<figure class=\"wp-block-image size-large\"><img decoding=\"async\" width=\"1024\" height=\"680\" src=\"http:\/\/10.10.2.102\/creevacom\/wp-content\/uploads\/2021\/03\/pexels-luis-gomes-546819-scaled-1-1024x680.jpg\" alt=\"\" class=\"wp-image-96082\" srcset=\"http:\/\/10.10.2.102\/creevacom\/wp-content\/uploads\/2021\/03\/pexels-luis-gomes-546819-scaled-1-1024x680.jpg 1024w, http:\/\/10.10.2.102\/creevacom\/wp-content\/uploads\/2021\/03\/pexels-luis-gomes-546819-scaled-1-300x199.jpg 300w, http:\/\/10.10.2.102\/creevacom\/wp-content\/uploads\/2021\/03\/pexels-luis-gomes-546819-scaled-1-768x510.jpg 768w, http:\/\/10.10.2.102\/creevacom\/wp-content\/uploads\/2021\/03\/pexels-luis-gomes-546819-scaled-1-1536x1020.jpg 1536w, http:\/\/10.10.2.102\/creevacom\/wp-content\/uploads\/2021\/03\/pexels-luis-gomes-546819-scaled-1-1070x711.jpg 1070w, http:\/\/10.10.2.102\/creevacom\/wp-content\/uploads\/2021\/03\/pexels-luis-gomes-546819-scaled-1.jpg 2048w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/figure> <p><strong>The Start<\/strong><\/p> <p>For those that have known me for a while, one of my obsessions interests is archiving and keeping all the data I generate online. I do this to the best of my ability since obviously there are some services that you just can&#8217;t get the data out of (at least not on a regular basis &#8211; obviously, some services allow you to bulk export your data and I have tons of that from services in the internet graveyard). So I&#8217;ve always meant to do something with it. I figured way back when I would just script it. <\/p> <p>Originally it was all on my blog doing a daily dive of all my traffic and generating my lifestream. However, once you stop posting regularly it really gets spammy &#8211; so I stopped. Behind the scenes though &#8211; the spice kept flowing. Flow it did, into tons of files with new information being generated each day. So about three years ago (well, after there was about 14 years&#8217; worth of data I had collected) &#8211; I decided to throw it all into a wiki. Sounds great &#8211; I have plain text &#8211; I can do something with this. <\/p> <p><strong>The Plan<\/strong><\/p> <p>Which wiki to choose though? I was comfortable with Media-wiki &#8211; but similar to just using WordPress, it locks everything up in a database. Now I understand a database can be scripted, adjusted, poked, and prodded. I&#8217;m just not that great with scripting against databases. I have done it &#8211; when I was a consultant I wrote a script that could dump out information from MS-SQL or embedded DB2 databases. I just didn&#8217;t like all my data in a single database file. I would rather lose one than lose them all. <\/p> <p>This lead me to look for a wiki that had flat files. Optimally the files would be plain text and accessible. After searching I decided upon Dokuwiki. It used plain text files for its pages &#8211; and worked just like a regular wiki from the end-user perspective (syntax differences aside). I installed it. Then I did nothing with it. I then installed it on the home network again. Then I did nothing with it again. This cycle went on for a while. I saved the pages in hopes of building something new from the ashes eventually. <\/p> <p><strong>Baby Steps<\/strong><\/p> <p>Honestly what made Dokuwiki stick was starting to do genealogy. I needed a way to capture documents in a better method than regular software was allowing me to do. I started entering data and formatting it, scrubbing it, tweaking it &#8211; essentially making it mine. Then one day I look up I&#8217;m a regular DokuWiki user. Its regular use was finally ingrained into me. I would check and change things at least weekly. I started migrating some of my documentation over (the kind that can&#8217;t be as easily scripted &#8211; but while we are on the subject, my scripts are in the wiki also). <\/p> <p>We even had the whole family involved &#8211; well my wife is reticent. She&#8217;s finally seeing the value but is going to host her own version on her own Raspberry Pi. However, my son and I use the home network hosted on a Mac. It even syncs across our machines, so in a pinch offline we can still use it. Maybe that use case will come to pass as we enter the final stretch of the pandemic and finally cross the finish line. <\/p> <p>So a year later (I mean this is a 14-year journey &#8211; time is meaningless in the vastness of the internet &#8211; it&#8217;s either milliseconds or an eternity) I think &#8220;Huh&#8221; &#8211; you know what would be a great idea. I could use the wiki and actually do something with all that old data I have. I could also generate pages off of my stuff going forward. As I said this to myself, I also remembered that was the whole reason I started this in the first place. It wasn&#8217;t meant for manual data transfer over time. It was meant for up-to-the-day scripted and gathered information. Now how to do it?<\/p> <p><strong>The Script<\/strong><\/p> <p>In theory, I knew what I was going to do. I wrote a MacOS script that parsed data as a customer project before. I&#8217;ve used that as a starting point for other projects. Just a cat cat here and a sed sed there &#8211; here a grep there a grep &#8211; everywhere a grep grep grep. However, the plan is eventually to move this to a Raspberry Pi and have it run on a schedule to grab and sort the data. So that means time to do it on Linux. Because sometimes the quirks between a Linux and Mac script can be painful Thankfully I have both a Mac and Linux laptop. <\/p> <p>So time to go into Dokuwiki and make a template. I made what I originally considered the end all be for what I needed in a template. Then I configured the script to generate it. Then as I&#8217;m scripting I changed it at least two dozen times. But I finally generated what I thought was a good copy. I copied the file to the directory on the wiki and it worked in the browser without issues. I was like Strong Bad pounding away at the keyboard making it go. <\/p> <figure class=\"wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<iframe title=\"Strong Bad Email #58 - Dragon\" width=\"500\" height=\"281\" src=\"https:\/\/www.youtube.com\/embed\/90X5NJleYJQ?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen><\/iframe>\n<\/div><\/figure> <p>Because the up-to-the-minute generation of the file would be a pain in the butt, I decided I would use the Yesterday is Today approach. The file would be generated on yesterday&#8217;s data. Then I can add my own personal notes to fill in the gaps. The goal when this is automatic and I&#8217;m not tweaking things at night is to make my notes in the morning. This isn&#8217;t working well right now because I update the final page in the evening (of the day after it occurred). <\/p> <p>It&#8217;s all working so far, and while I rely heavily on files generated by IFTTT, I hope to work on using more API calls to directly generate the information. That script section will be once everything is working though. It&#8217;s a bigger project of knowledge &#8211; so I&#8217;m on a bicycle version of script writing. It&#8217;s not a motorcycle, but the training wheels are off as I clean up the spaghetti script regularly. <\/p> <p><strong>The Output<\/strong><\/p> <p>Now my daily journal has too much private data for me to share a screenshot of a page. Once I build test data (which I started yesterday) &#8211; where I can check everything and how it looks, you&#8217;ll just have to read. <\/p> <p>The top of the page has the journal date a fancy graphic, and navigation to the journal archive &#8211; archive by year &#8211; archive of the current month &#8211; yesterday and tomorrow. Then we get to the sections<\/p> <ul>\n<li>Calendar\n<ul>\n<li>Lists each Google Calendar Event by the hour from the day<\/li>\n<\/ul>\n<\/li> <li>Notes (this is where I do my daily updates)<\/li> <li>Blog Posts<\/li> <li>Social Media\n<ul>\n<li>Facebook\n<ul>\n<li>Status Updates<\/li> <li>Links Shared<\/li> <li>Image Uploads<\/li> <li>Images I was tagged in<\/li>\n<\/ul>\n<\/li> <li>YouTube\n<ul>\n<li>Uploaded to the main account<\/li> <li>Uploaded to my Retrometrics account<\/li> <li>Liked videos<\/li>\n<\/ul>\n<\/li> <li>Reddit\n<ul>\n<li>Posts<\/li> <li>Comments<\/li> <li>Upvotes<\/li> <li>Downvotes<\/li> <li>Saved posts<\/li>\n<\/ul>\n<\/li> <li>Twitch &#8211; lists all streaming sessions<\/li> <li>Instagram &#8211; all images<\/li> <li>Twitter\n<ul>\n<li>Posts<\/li> <li>Links<\/li> <li>Mentions<\/li>\n<\/ul>\n<\/li>\n<\/ul>\n<\/li> <li>Travel\n<ul>\n<li>Foursquare Check-ins<\/li> <li>Uber Trips<\/li>\n<\/ul>\n<\/li> <li>Health\n<ul>\n<li>Fitbit Data (not done yet)<\/li> <li>Strava Activities<\/li>\n<\/ul>\n<\/li> <li>Media\n<ul>\n<li>Goodreads Activity<\/li> <li>PSN Trophies<\/li> <li>Beaten Video Game Tracking (Grouvee)<\/li>\n<\/ul>\n<\/li> <li>Home Automation\n<ul>\n<li>Music played on Alexa<\/li> <li>Videos played on Plex<\/li> <li>Nest Thermostat Changes<\/li>\n<\/ul>\n<\/li> <li>World Information\n<ul>\n<li>Weather<\/li> <li>News Headlines (still working on)<\/li>\n<\/ul>\n<\/li> <li>To Do\n<ul>\n<li>Todoist tasks added<\/li> <li>Todoist tasks deleted<\/li>\n<\/ul>\n<\/li> <li>Shopping List\n<ul>\n<li>Shopping List Items Added<\/li> <li>Shopping List Items Removed<\/li>\n<\/ul>\n<\/li> <li>Contacts\n<ul>\n<li>Google Contacts Updates<\/li> <li>Twitter Followers<\/li>\n<\/ul>\n<\/li> <li>Errata\n<ul>\n<li>Just personal information for cross reference, but this is just the start of the foot which is all static information. <\/li>\n<\/ul>\n<\/li>\n<\/ul> <p>That, my friends, is my project for the last week. It also includes sanitizing and normalizing the input data. I&#8217;ve been a scripting fool and expect to keep at it for at least one more week. Then, maybe I&#8217;ll be able to walk away from it &#8211; just fix things when they are broken. <\/p> <p>Though for what it&#8217;s worth, it inspired me to write and use my blog. I guess that&#8217;s something. <\/p>\n","protected":false},"excerpt":{"rendered":"<p>The Start For those that have known me for a while, one of my obsessions interests is archiving and keeping all the data I generate online. I do this to the best of my ability &hellip;<\/p>\n","protected":false},"author":1,"featured_media":96082,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[3],"tags":[],"_links":{"self":[{"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/posts\/96081"}],"collection":[{"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/comments?post=96081"}],"version-history":[{"count":1,"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/posts\/96081\/revisions"}],"predecessor-version":[{"id":103423,"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/posts\/96081\/revisions\/103423"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/media\/96082"}],"wp:attachment":[{"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/media?parent=96081"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/categories?post=96081"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/10.10.2.102\/creevacom\/index.php\/wp-json\/wp\/v2\/tags?post=96081"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}